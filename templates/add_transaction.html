{% extends "base.html" %}
{% block content %}
<div class="flex items-center justify-between mb-6">
  <div>
    <h3 class="text-2xl font-bold text-white">Add Transaction</h3>
    <p class="text-sm text-text-muted">Record a new expense or income.</p>
  </div>
  <a href="{{ url_for('main.transactions') }}" class="px-3 py-2 rounded-xl border border-white/10 text-white hover:bg-white/5">Back</a>
</div>

<div class="max-w-3xl mx-auto rounded-2xl border border-white/5 bg-slate-900/70 shadow-card p-6">
  <form method="POST" enctype="multipart/form-data" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <label class="text-sm font-semibold text-white flex flex-col gap-2">
        <span>Date</span>
        <input type="date" class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" name="date" value="{{ today }}">
      </label>
      <label class="text-sm font-semibold text-white flex flex-col gap-2">
        <span>Type</span>
        <select class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" name="type">
          <option value="expense">Expense</option>
          <option value="income">Income</option>
        </select>
      </label>
      <label class="text-sm font-semibold text-white flex flex-col gap-2">
        <span>Category</span>
        <input list="categoryList" name="category" class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" placeholder="e.g. Food" required>
        <datalist id="categoryList">
          {% for cat in categories %}
            <option value="{{ cat }}"></option>
          {% endfor %}
        </datalist>
      </label>
      <label class="text-sm font-semibold text-white flex flex-col gap-2">
        <span>Amount</span>
        <input type="number" step="0.01" min="0" name="amount" class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" placeholder="0.00" required>
      </label>
      <label class="text-sm font-semibold text-white flex flex-col gap-2">
        <span>Currency</span>
        <select class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" name="currency">
          {% for c in currencies %}
            <option value="{{ c }}" {% if c == base_currency %}selected{% endif %}>{{ c }}</option>
          {% endfor %}
        </select>
      </label>
    </div>
    <label class="text-sm font-semibold text-white flex flex-col gap-2">
      <span>Description</span>
      <textarea class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" name="description" rows="2" placeholder="Optional"></textarea>
    </label>
    <label class="text-sm font-semibold text-white flex flex-col gap-2">
      <span>Receipt (optional)</span>
      <input type="file" class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" name="receipt" accept=".png,.jpg,.jpeg,.pdf">
      <span class="text-xs text-text-muted">Tip: add a keyword in description to auto-categorize next time.</span>
    </label>
    <div class="flex justify-end">
      <button class="px-5 py-2 rounded-xl bg-primary text-white font-semibold shadow-button hover:brightness-110">Save</button>
    </div>
  </form>
</div>
{% endblock %}
