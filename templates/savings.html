{% extends "base.html" %}
{% block content %}
<div class="flex flex-wrap items-center justify-between gap-3 mb-6">
  <div>
    <h2 class="text-3xl font-bold text-white">Savings Goal</h2>
    <p class="text-sm text-text-muted">Set a target and track your progress.</p>
  </div>
  <a href="{{ url_for('main.dashboard') }}" class="px-3 py-2 rounded-xl border border-white/10 text-white hover:bg-white/5">Back</a>
</div>

<div class="rounded-2xl border border-white/5 bg-slate-900/70 shadow-card p-6">
  {% if goal %}
  {% set percent = percent if percent < 100 else 100 %}
  <div class="flex items-center justify-between mb-3">
    <div>
      <h5 class="text-lg font-semibold text-white">{{ goal.name }}</h5>
      <p class="text-xs text-text-muted">Current: ${{ '%.2f'|format(goal.current_amount) }} / Target: ${{ '%.2f'|format(goal.target_amount or 0) }}</p>
    </div>
    <div class="text-sm font-bold">{{ '%.0f'|format(percent) }}%</div>
  </div>
  <div class="w-full h-3 rounded-full bg-white/10 overflow-hidden mb-4">
    <div class="h-3 rounded-full bg-gradient-to-r from-emerald-400 to-sky-400" style="width: {{ percent }}%"></div>
  </div>
  {% else %}
  <p class="text-sm text-text-muted mb-4">No savings goal yet.</p>
  {% endif %}

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <form method="POST" class="space-y-2">
      <input type="hidden" name="action" value="set_target">
      <label class="text-sm text-white font-semibold flex flex-col gap-1">
        Set / Update Target
        <input type="number" step="0.01" name="target_amount" class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" placeholder="e.g., 5000">
      </label>
      <button class="w-full px-4 py-2 rounded-xl bg-primary text-white font-semibold shadow-button hover:brightness-110">Save Target</button>
    </form>

    <form method="POST" class="space-y-2">
      <input type="hidden" name="action" value="add_contribution">
      <label class="text-sm text-white font-semibold flex flex-col gap-1">
        Add Contribution
        <input type="number" step="0.01" name="add_amount" class="w-full rounded-xl bg-slate-900/60 border border-white/10 px-3 py-2 text-sm focus:ring-2 focus:ring-primary" placeholder="e.g., 200">
      </label>
      <button class="w-full px-4 py-2 rounded-xl border border-white/10 text-white font-semibold hover:bg-white/5">Add Funds</button>
    </form>
  </div>
</div>
{% endblock %}
